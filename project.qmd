---
title: DANL Project
subtitle: "Data-Driven Mastery: Unlocking Business Potential"
author: 
  - Kohl Courtwright
  - Benjamin DesJardins
  - AJ Forte
  - Misfer Hamid
  - Shannon Pierce

toc: true
toc-title: "Table of Contents"
toc-depth: 2
number-sections: true

fig-width: 9

execute:
  code-tools: true
  message: false
  warning: false

from: markdown+emoji
---

```{r setup}
#| include: false
library(tidyverse)
library(skimr)
library(ggthemes)
library(hrbrthemes)

theme_set(theme_ipsum()+
          theme(strip.background =element_rect(fill="lightgray"),
                axis.title.x = 
                  element_text(angle = 0,
                               size = rel(1.33),
                               margin = margin(10,0,0,0)),
                axis.title.y = 
                  element_text(angle = 0,
                               size = rel(1.33),
                               margin = margin(0,10,0,0))
                )
          )
```

# Introduction

# Data

The data.frame `nyc_estate` is a set of data that is a record of every building or building unit (apartment, etc.) sold in the New York City property market over a 12-month period. It is available at <https://www.kaggle.com/datasets/new-york-city/nyc-property-sales> for free use.

## Summary Statistics

```{r}
nyc_estate <- read_csv("https://bendesjardins.github.io/nyc-rolling-sales.csv")
```

```{r}
#| results: asis
#| echo: false
rmarkdown::paged_table(nyc_estate) 
```

## Distribution of Key Data

### Sale Price

```{r}
clean_sale <- nyc_estate %>% 
  filter(!(`SALE PRICE` == "-"))

ggplot(data = clean_sale) +
  geom_histogram(aes(x = log(as.numeric(`SALE PRICE`))), bins = 200) +
  labs(x = "Log of `Sale Price`")
```

After taking the log of `Sale Price`, we can see that there seems to be a pretty normal distrbution with a few outliers near the lower range of data.

### TAX CLASS AT TIME OF SALE

```{r}
ggplot(data = nyc_estate) +
  geom_bar(aes(x = `TAX CLASS AT TIME OF SALE`))
```

`TAX CLASS AT TIME OF SALE` is a categorical variable taking on the values of `1`, `2`, and `4` with most of the variables being either a `1` or `2`.

### YEAR BUILT

```{r}
clean_year <- nyc_estate %>% 
  filter(!(`YEAR BUILT` == 0))

ggplot(data = clean_year) + 
  geom_histogram(aes(x = `YEAR BUILT`), bins = 100) + 
  scale_x_continuous(limits = c(1800, 2020))
```

## Comparison with Sale Price

### Sale Price versus Tax Class At Time of Sale

```{r}
ggplot(data = clean_sale) +
  geom_histogram(aes(x = log(as.numeric(`SALE PRICE`)), 
                     color = `TAX CLASS AT TIME OF SALE`), bins = 100) +
  facet_wrap(. ~ `TAX CLASS AT TIME OF SALE`, scales = 'free') +
  labs(x = "Log of `SALE PRICE`")
```

They all have some resemblance of a normal distribution, with those at a tax class of `2` having the most normal distribution. Those in the `4` class has the most skewed data with many outliers in proportion to the rest of those in `1` and `2`.

### Sale Price versus Year Built

```{r}
clean_year_sale <- clean_sale %>% 
  filter(!(`YEAR BUILT` == 0))

ggplot(data = clean_year_sale) +
  geom_point(aes(x = log(as.numeric(`SALE PRICE`)), y = `YEAR BUILT`), alpha = .02) +
  scale_y_continuous(limits = c(1900, 2020))

cor(as.numeric(clean_year_sale$`SALE PRICE`), clean_year_sale$`YEAR BUILT`)
```
As the figure shows, there is very little correlation between year built and sale price. If we take the correlation value between them, we get less than 0.01 which means there is essentially no correlation. 

### Tax Class at Time of Sale versus Year Built
```{r}
ggplot(data = clean_year) +
  geom_histogram(aes(x = `YEAR BUILT`), bins = 50) +
  facet_wrap(. ~ `TAX CLASS AT TIME OF SALE`) + 
  scale_x_continuous(limits = c(1900, 2020))
```